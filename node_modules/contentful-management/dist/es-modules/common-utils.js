/* eslint-disable @typescript-eslint/ban-ts-ignore */
import copy from 'fast-copy';
import { toPlainObject } from 'contentful-sdk-core';
// eslint-disable-next-line @typescript-eslint/no-explicit-any
export var wrapCollection = function wrapCollection(fn) {
  return function (http, data) {
    for (var _len = arguments.length, rest = new Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {
      rest[_key - 2] = arguments[_key];
    }

    var collectionData = toPlainObject(copy(data)); // @ts-ignore

    collectionData.items = collectionData.items.map(function (entity) {
      return fn.apply(void 0, [http, entity].concat(rest));
    }); // @ts-ignore

    return collectionData;
  };
};