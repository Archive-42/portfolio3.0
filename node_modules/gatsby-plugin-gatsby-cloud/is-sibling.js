"use strict";

exports.__esModule = true;
exports.isSibling = exports.isDynamicSegment = void 0;

var _lodash = require("lodash");

const isDynamicSegment = segment => (0, _lodash.startsWith)(segment, `:`) || (0, _lodash.startsWith)(segment, `*`);

exports.isDynamicSegment = isDynamicSegment;

const isSibling = (pagePath, maybeSiblingPagePath) => {
  const pageSegments = pagePath.split(`/`).filter(Boolean);
  const maybeSiblingPageSegments = maybeSiblingPagePath.split(`/`).filter(Boolean); // Do we have the same number of segments?

  if (pageSegments.length !== maybeSiblingPageSegments.length) {
    return false;
  } // Are all the segments except the last one the same?


  if (!(0, _lodash.isEqual)(pageSegments.slice(0, pageSegments.length - 1), maybeSiblingPageSegments.slice(0, pageSegments.length - 1))) {
    return false;
  }

  const finalSegmentForPage = pageSegments[pageSegments.length - 1];
  const finalSegmentForMaybeSiblingPage = maybeSiblingPageSegments[maybeSiblingPageSegments.length - 1]; // Is the final segment the same?

  if (finalSegmentForPage === maybeSiblingPageSegments) {
    return false;
  } // Is one of the segments a dynamic one?


  if (!isDynamicSegment(finalSegmentForPage) && !isDynamicSegment(finalSegmentForMaybeSiblingPage)) {
    return false;
  }

  return true;
};

exports.isSibling = isSibling;